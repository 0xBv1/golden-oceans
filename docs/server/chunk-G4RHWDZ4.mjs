import './polyfills.server.mjs';
import{a as A}from"./chunk-DZYZR26X.mjs";import{a as P}from"./chunk-U44SQYLF.mjs";import"./chunk-2UYROUIQ.mjs";import{c as E,e as v,h as O,i as k,j as I,l as b,n as T,q as D,r as N,z as q}from"./chunk-NEUL2I3Y.mjs";import{a as M}from"./chunk-FJMUSIHF.mjs";import"./chunk-TRU4LM35.mjs";import{$c as L,Aa as C,Ea as s,Ec as y,Fa as g,Fb as a,Ob as x,Pb as S,V as h,Va as c,Xa as m,_c as F,gb as t,hb as i,ib as p,pb as f,rb as _,yc as w}from"./chunk-HZT3DEIN.mjs";import"./chunk-VVCT4QZE.mjs";var j=()=>["/"];function z(o,u){o&1&&(t(0,"span"),a(1,"email required"),i())}function B(o,u){if(o&1&&(t(0,"div",31),c(1,z,2,0,"span",32),i()),o&2){let e,r=_();s(),m("ngIf",(e=r.loginForm.get("email"))==null?null:e.getError("required"))}}function G(o,u){o&1&&(t(0,"span"),a(1,"password required"),i())}function R(o,u){if(o&1&&(t(0,"div",31),c(1,G,2,0,"span",32),i()),o&2){let e,r=_();s(),m("ngIf",(e=r.loginForm.get("password"))==null?null:e.getError("required"))}}function V(o,u){o&1&&p(0,"i",33)}var ee=(()=>{class o{constructor(e,r,n,l){this._DataService=e,this._AuthService=r,this.toastr=n,this._Router=l,this.isLoading=!1,this.countryList=[],this.loginForm=new I({email:new b("",[v.required]),password:new b("",[v.required])})}ngOnInit(){this.getSettings(),this.getCountries()}getSettings(){this._DataService.getSetting().subscribe({next:e=>{console.log(e.data);let r=e.data.find(l=>l.option_key==="logo");this.logo=r?.option_value[0];let n=e.data.find(l=>l.option_key==="site_title");this.siteTitle=n?.option_value[0]},error:e=>{}})}getCountries(){this._DataService.getCountries().subscribe({next:e=>{console.log(e.data),this.countryList=e.data}})}handleLoginForm(){this.loginForm.valid&&(this.isLoading=!0,this._AuthService.setlogin(this.loginForm.value).subscribe({next:e=>{e.status===!0?(this._AuthService.loginSuccess(e),this.toastr.success(e.message),this._Router.navigate([""]),console.log(localStorage.getItem("accessToken"))):this.toastr.error("Login failed")},error:e=>{this.toastr.error(e?.error?.message??"Login error")}}))}handleForgetPass(e){console.log(e),this._AuthService.setForgetPass(e).subscribe({next:r=>{console.log(r),this.toastr.success(r.message)}})}static{this.\u0275fac=function(r){return new(r||o)(g(M),g(A),g(P),g(F))}}static{this.\u0275cmp=h({type:o,selectors:[["app-login"]],standalone:!0,features:[x],decls:45,vars:10,consts:[[1,"pageBanner","mb-5",2,"background",`linear-gradient(
        to right,
        rgba(0, 0, 0, 0.5),
        rgba(0, 0, 0, 0.7)
      ),
      url('../../../assets/image/auth\\ bg.avif') center/cover no-repeat`],[1,"text-capitalize","text-white","fw-bold","h-100","flexCenter","justify-content-end","pb-5","mb-5","flex-column"],[1,"fw-bold"],["aria-label","breadcrumb",2,"--bs-breadcrumb-divider","'\u2708\uFE0F'"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"text-decoration-none","text-white",3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active","text-white"],[1,"my-5","py-5"],[1,"container"],[1,"col-lg-6","col-md-8","mx-auto"],[1,"specialBorder","bg-white","p-4","sideBar"],[1,"text-center"],["width","200px","height","70px",3,"src","alt","title"],[1,"fs-5"],[1,"",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"textSecondColor","text-capitalize","fw-bold","mb-2"],[1,"item","position-relative"],["type","email","id","email","formControlName","email","placeholder","Your Email ",1,"form-control","p-2","ps-5","rounded-3"],[1,"fa-regular","fa-envelope","textMainColor"],["class","alert alert-danger mt-2",4,"ngIf"],["for","password",1,"textSecondColor","text-capitalize","fw-bold","mb-2"],["type","password","id","password","formControlName","password","placeholder","Your Password ",1,"form-control","p-2","ps-5","rounded-3"],[1,"fa","fa-lock","textMainColor"],["routerLink","/forgetPassword",1,"my-2","textMainColor","fw-bold","cPointer","text-capitalize",3,"click"],["type","submit",1,"mainBtn","Btn","mb-3","w-100",3,"disabled"],["class","fa-solid fa-spinner fa-spin me-1 border-0 bg-transparent text-white",4,"ngIf"],[1,"fa","fa-paper-plane","mx-2","border-0","bg-transparent","text-white"],[1,"my-2","text-center"],["routerLink","/signup",1,"textMainColor","fw-bold","cPointer"],[1,"alert","alert-danger","mt-2"],[4,"ngIf"],[1,"fa-solid","fa-spinner","fa-spin","me-1","border-0","bg-transparent","text-white"]],template:function(r,n){if(r&1&&(t(0,"section",0)(1,"div",1)(2,"h2",2),a(3,"log in"),i(),t(4,"nav",3)(5,"ol",4)(6,"li",5)(7,"a",6),a(8,"Home"),i()(),t(9,"li",7),a(10," log in "),i()()()()(),t(11,"section",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),p(16,"img",13),t(17,"p",14),a(18,"Create your H&S account"),i()(),t(19,"form",15),f("ngSubmit",function(){return n.handleLoginForm()}),t(20,"div",16)(21,"label",17),a(22,"email address"),i(),t(23,"div",18),p(24,"input",19)(25,"i",20),i(),c(26,B,2,1,"div",21),i(),t(27,"div",16)(28,"label",22),a(29,"password"),i(),t(30,"div",18),p(31,"input",23)(32,"i",24),i(),c(33,R,2,1,"div",21),i(),t(34,"p",25),f("click",function(){let d;return n.handleForgetPass((d=n.loginForm.get("email"))==null?null:d.value)}),a(35," forget password ? "),i(),t(36,"button",26),c(37,V,1,0,"i",27),p(38,"i",28),a(39," log in "),i()(),p(40,"div"),t(41,"p",29),a(42," Don't have an account? "),t(43,"span",30),a(44,"Sign Up."),i()()()()()()),r&2){let l,d;s(7),m("routerLink",S(9,j)),s(9),m("src",n.logo,C)("alt",n.siteTitle)("title",n.siteTitle),s(3),m("formGroup",n.loginForm),s(7),m("ngIf",((l=n.loginForm.get("email"))==null?null:l.errors)&&((l=n.loginForm.get("email"))==null?null:l.touched)),s(7),m("ngIf",((d=n.loginForm.get("password"))==null?null:d.errors)&&((d=n.loginForm.get("password"))==null?null:d.touched)),s(3),m("disabled",n.loginForm.invalid),s(),m("ngIf",n.isLoading)}},dependencies:[L,q,T,E,O,k,D,N,y,w],styles:['.item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:12px;left:15px}.item[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]::-webkit-datetime-edit{color:transparent}.item[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus::-webkit-datetime-edit, .item[_ngcontent-%COMP%]   input[type=date].filled[_ngcontent-%COMP%]::-webkit-datetime-edit{color:inherit}.item[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{position:relative}.item[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:before{content:attr(data-placeholder);position:absolute;left:2.5rem;top:50%;transform:translateY(-50%);color:#616879}.item[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus:before, .item[_ngcontent-%COMP%]   input[type=date].filled[_ngcontent-%COMP%]:before{content:""}']})}}return o})();export{ee as LoginComponent};

import{a as R}from"./chunk-2S5PJSXO.js";import{a as H}from"./chunk-JRYIPAML.js";import"./chunk-CARY4E7O.js";import"./chunk-3LZFY6MN.js";import{$a as m,Ca as o,Da as C,Db as a,Dc as j,Fb as l,Mb as L,Nb as S,Ta as g,Tb as z,Va as u,Vb as D,Z as w,ab as E,cb as I,db as P,eb as r,fa as x,fb as n,ga as h,gb as B,hb as T,ib as F,jc as $,kb as v,mc as V,nb as b,pb as d,pc as M,ya as y}from"./chunk-E3Q76OLE.js";var A=()=>["/"],G=()=>["/checkout"];function N(i,s){if(i&1&&a(0),i&2){let e=d().$implicit;l(" ",e.adults," Adults ")}}function O(i,s){if(i&1&&a(0),i&2){let e=d().$implicit;l(" ",e.children," Children ")}}function U(i,s){if(i&1&&a(0),i&2){let e=d().$implicit;l(" ",e.infants," infants ")}}function q(i,s){if(i&1){let e=v();r(0,"div",12)(1,"h5",16),a(2),n(),r(3,"div",17)(4,"figure",18),B(5,"img",19),n()(),r(6,"div",20)(7,"figcaption",21)(8,"div",22)(9,"h2",23),a(10),n(),r(11,"i",24),b("click",function(){let c=x(e).$implicit,p=d(2);return h(p.deleteCart(c.tour.id))}),n()(),r(12,"div",25)(13,"div")(14,"p",26),a(15),z(16,"date"),n(),r(17,"p",26),a(18," guests: "),g(19,N,1,1)(20,O,1,1)(21,U,1,1),n()(),r(22,"span",27),a(23),n()()()()()}if(i&2){let e=s.$implicit,t=s.$index;o(2),l(" tour (",t+1,") "),o(3),u("src",e.tour.featured_image,y)("alt",e.tour.title)("title",e.tour.title),o(5),l(" ",e.tour.title," "),o(5),l(" Reservation: ",D(16,10,e.start_date,"dd/MM/yyyy")," "),o(4),m(19,e.adults>0?19:-1),o(),m(20,e.children>0?20:-1),o(),m(21,e.infants>0?21:-1),o(2),l("$ ",e.totalPrice,"")}}function J(i,s){if(i&1){let e=v();r(0,"div",11),I(1,q,24,13,"div",12,E),r(3,"div",13)(4,"button",14),b("click",function(){x(e);let c=d();return h(c.clearCart())}),a(5," clear cart "),n(),r(6,"button",15),a(7," checkout "),n()()()}if(i&2){let e=d();o(),P(e.tourCart),o(5),u("routerLink",S(1,G))}}function K(i,s){i&1&&(T(0),r(1,"p",28),a(2," no cart avaliable "),n(),F())}var et=(()=>{class i{constructor(e,t){this._BookingService=e,this.toaster=t,this.tourCart=[],this.haveData=!1,this.totalPrice=0}ngOnInit(){this.getListCart()}getListCart(){this._BookingService.getCartList().subscribe({next:e=>{this.tourCart=e.data,this.tourCart.length===0?(this.haveData=!1,console.log(this.tourCart)):(this.haveData=!0,console.log(this.tourCart),this.tourCart.forEach(t=>{let c=0,p=0,_=0;if(t.tour?.pricing_groups?.length>0){let f=t.tour.pricing_groups.find(k=>t.adults>=k.from&&t.adults<=k.to);f?(c=f.price,p=f.child_price):(c=t.tour.adult_price,p=t.tour.child_price,_=t.tour.infant_price)}else c=t.tour.adult_price,p=t.tour.child_price,_=t.tour.infant_price;t.adultPrice=c,t.childPrice=p,t.infantPrice=_,t.totalPrice=t.adults*t.adultPrice+t.children*t.childPrice+t.infants*t.infantPrice}))},error:e=>{}})}deleteCart(e){this._BookingService.deleteTourCart(e).subscribe({next:t=>{this.toaster.success(t.message),this.getListCart()},error:t=>{this.toaster.error(t.error.message)}})}clearCart(){this._BookingService.clearTourCart().subscribe({next:e=>{this.toaster.success(e.message),this.getListCart()},error:e=>{this.toaster.error(e.error.message)}})}static{this.\u0275fac=function(t){return new(t||i)(C(R),C(H))}}static{this.\u0275cmp=w({type:i,selectors:[["app-cart"]],standalone:!0,features:[L],decls:14,vars:4,consts:[[1,"pageBanner","mb-5",2,"background",`linear-gradient(
        to right,
        rgba(0, 0, 0, 0.5),
        rgba(0, 0, 0, 0.7)
      ),
      url('../../../assets/image/shopping-cart.jpg') center/cover no-repeat`],[1,"text-capitalize","text-white","fw-bold","h-100","flexCenter","justify-content-end","pb-5","mb-5","flex-column"],[1,"fw-bold"],["aria-label","breadcrumb",2,"--bs-breadcrumb-divider","'\u2708\uFE0F'"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"text-decoration-none","text-white",3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active","text-white"],[1,"my-5"],["class","container",4,"ngIf"],[4,"ngIf"],[1,"container"],[1,"row","align-items-center","g-3","mt-4","p-3","border","specialBorder"],[1,"flexCenter","my-4"],[1,"btn","btn-danger","rounded-pill","text-capitalize","py-2",3,"click"],[1,"mainBtn","Btn","flexCenter","gap-2","m-2","mb-2",3,"routerLink"],[1,"fw-bold","text-capitalize","h3","text-black"],[1,"col-md-3","flex-shrink-0"],[1,"specialBorder","overflow-hidden","imgHover"],["height","200px","loading","lazy",1,"w-100",3,"src","alt","title"],[1,"col-md-9"],[1,"textSecondColor"],[1,"flexBetween"],[1,"fw-bold","text-capitalize","h4","pe-3"],[1,"fa","fa-trash-can","text-danger","fs-5","flex-shrink-0","cPointer",3,"click"],[1,"flexBetween","text-capitalize"],[1,"mb-0"],[1,"textSecondColor","fw-bolder","fs-5","flex-shrink-0","cPointer","align-self-end"],[1,"text-capitalize","text-danger","fs-1","text-center"]],template:function(t,c){t&1&&(r(0,"section",0)(1,"div",1)(2,"h2",2),a(3,"my cart"),n(),r(4,"nav",3)(5,"ol",4)(6,"li",5)(7,"a",6),a(8,"Home"),n()(),r(9,"li",7),a(10," my cart "),n()()()()(),r(11,"section",8),g(12,J,8,2,"div",9)(13,K,3,0,"ng-container",10),n()),t&2&&(o(7),u("routerLink",S(3,A)),o(5),u("ngIf",c.haveData),o(),u("ngIf",!c.haveData))},dependencies:[j,M,$,V]})}}return i})();export{et as CartComponent};
